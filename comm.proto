syntax = "proto3";
package comm;
option go_package = "github.com/kmrd-industries/qlp-proto-bindings/gen/go";

// sent via UDP
message MovementUpdate {
    uint32 entity_id = 1;
    float position_x = 2;
    float position_y = 3;
    float weapon_pivot_x = 4;
    float weapon_pivot_y = 5;
    float direction = 6;
    bool attack = 7;
    Room curr_room = 8;
}

// sent via TCP
message Player {
    uint32 id = 1;
    Weapon weapon = 2;
}

message Weapon {
    uint32 id = 1;
}

message GameState {
    Player player = 1;
    uint32 weapon_id = 2;
    int64 seed = 3;
    repeated Player connected_players = 4;
}

message Room {
    int32 x = 1;
    int32 y = 2;
}

enum StateVariant {
    NONE = 0;
    CONNECTED = 1;
    DISCONNECTED = 2;
    ROOM_CHANGED = 3;
}

message BytePrefix {
    uint32 bytes = 1;
}

message StateUpdate {
    Player player = 1;
    Weapon weapon = 2;
    StateVariant variant = 3;
    Room room = 4;
}
